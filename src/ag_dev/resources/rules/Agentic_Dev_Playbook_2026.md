# Agentic Development Playbook V2: "é›¶é‡åŠ›å”è­° (Zero Gravity Protocol)"
> **æ—¥æœŸ**: 2026-01-18
> **ç‰ˆæœ¬**: 2.5 (ERP å¯¦æˆ°å¼·åŒ–ç‰ˆ)
> **ç¯„åœ**: é€²éšŽäººæ©Ÿå”ä½œã€é•·ä¸Šä¸‹æ–‡ç®¡ç†ã€å®‰å…¨èˆ‡è¡›ç”Ÿè¦ç¯„ã€èªçŸ¥æ²»ç†ã€çµæ§‹ç§©åºã€è„ˆçµ¡å®Œæ•´æ€§ã€è‡ªæˆ‘æ‰¹åˆ¤ã€æŒçºŒè¿­ä»£ã€æ¥­å‹™ç³»çµ±æ²»ç†

---

## ðŸ—ï¸ ç¬¬ä¸€éƒ¨ï¼šæž¶æ§‹è—åœ– (The Trinity)
é©ç”¨æ–¼ä¸­å°åž‹å°ˆæ¡ˆï¼ˆå¦‚ Web å°„æ“ŠéŠæˆ²ï¼‰çš„æ¨™æº–æž¶æ§‹èˆ‡åˆ†å·¥ã€‚

### 1.1 ä¸‰ä½ä¸€é«” (The Trinity)
ä¸è¦éŽåº¦æ‹†åˆ†ï¼Œç¶­æŒ **3 Agent é»ƒé‡‘æ¯”ä¾‹**ï¼š

| Agent åç¨± | è§’è‰² | è·è²¬ |
| :--- | :--- | :--- |
| **Agent A: Core (æ ¸å¿ƒ)** | å¼•æ“Žèˆ‡ç‰©ç† | æ•ˆèƒ½å„ªåŒ–ã€éŠæˆ²è¿´åœˆ (Game Loop)ã€ç‰©ä»¶æ±  (Object Pool)ã€è¨˜æ†¶é«”ç®¡ç† (Zero GC) |
| **Agent B: Logic (é‚è¼¯)** | çŽ©æ³•èˆ‡ AI | ç”Ÿæˆé‚è¼¯ã€è¡Œç‚ºæ¨¹ã€è¨ˆåˆ†ç³»çµ±ã€çŽ©å®¶æ•¸å€¼ |
| **Agent C: Visual (è¦–è¦º)** | è¡¨ç¾å±¤ | Canvas/WebGL ç¹ªåœ–ã€UI/HUDã€ç²’å­ç³»çµ± (Juice) |

### 1.2 åŽŸå­èƒ½åŠ› (The Skill Set)
å¿…é ˆå°è£ç‚ºç¨ç«‹ Skills (e.g., `skills/*.md`)ï¼š
1.  **`skill_math_vector`**: 2D å‘é‡é‹ç®—åº«ã€‚
2.  **`skill_object_pool`**: **[é—œéµ]** ç¦æ­¢ Runtime `new/delete`ã€‚å¼·åˆ¶é‡è¤‡ä½¿ç”¨å¯¦ä¾‹ã€‚
3.  **`skill_input_system`**: è¼¸å…¥ç·©è¡ (Input Buffer) é˜²å»¶é²ã€‚
4.  **`skill_state_machine`**: é¸å–® -> éŠçŽ© -> æš«åœ -> çµæŸã€‚

### 1.3 åŸ·è¡ŒéšŽæ®µ (Execution Phases)
1.  **Phase 1: å¿ƒè·³ (The Heartbeat)**: Loop, Delta Time.
2.  **Phase 2: ä¸»è§’ (The Actor)**: Player Move, Border.
3.  **Phase 3: å¨è„… (The Threat)**: Enemy Spawner.
4.  **Phase 4: äº’å‹• (The Interaction)**: Conflict, Hitbox.
5.  **Phase 5: è¦–è¦ºå›žé¥‹ (The Juice)**: Shake, Flash.

---

## ðŸ›¡ï¸ ç¬¬äºŒéƒ¨ï¼šIDE ç”Ÿå­˜æŒ‡å—
è§£æ±º IDE é–‹ç™¼ä¸­çš„ã€Œäººæ©Ÿæ„Ÿå®˜è½å·®ã€ã€‚

### 2.1 é˜²ç¦¦ç­–ç•¥
*   **ä¸»å‹•å¼ Linting**: æäº¤å‰å¼·åˆ¶åŸ·è¡Œ `npm run type-check`ã€‚
*   **è¦–è¦ºåŒ–é™¤éŒ¯ (Visual Debugging)**: å¼·åˆ¶å¯¦ä½œ `Debug Overlay` (ç¹ªè£½ Hitboxã€é¡¯ç¤º FPS/åº§æ¨™)ã€‚
*   **å‹¿è§¸å”è­° (Hands-off Protocol)**: ä»»å‹™åŸ·è¡ŒæœŸé–“ï¼Œäººé¡žç¦æ­¢è§¸ç¢°ç›®æ¨™æª”æ¡ˆã€‚
*   **Log é©…å‹•**: ä½¿ç”¨çµæ§‹åŒ– Log ä»£æ›¿ç´”æ–‡å­—ï¼Œæ–¹ä¾¿ Agent è§£æžã€‚

---

## â³ ç¬¬ä¸‰éƒ¨ï¼šå°è©±ç”Ÿå‘½é€±æœŸæ²»ç†
ç®¡ç†é•·å°è©±çš„ã€Œè¨˜æ†¶è¡°é€€ã€ã€‚

### 3.1 çµ‚æ­¢é–‹é—œæŒ‡æ¨™ (Kill Switch Metrics)
*   **Turn Count > 25**: å¼·åˆ¶è»Ÿåœæ­¢ (Soft Stop)ã€‚
*   **Error Loop >= 2**: åŒä¸€å€‹ Bug ä¿®å…©æ¬¡ä¿®ä¸å¥½ -> **ç«‹å³æ›æˆ¿ (New Session)**ã€‚
*   **Phase Completion**: å®Œç¾Žåˆ‡é»žï¼ŒéšŽæ®µå®Œæˆå³æ›æˆ¿ã€‚

### 3.2 äº¤æŽ¥å”è­° (Handover Protocol)
1.  **åŽŸå­ç¯„åœ (Atomic Scoping)**: ä¸€å€‹ Session åªåš `task.md` è£¡çš„ä¸€å€‹ Checkboxã€‚
2.  **å­˜æª”é»ž (Checkpointing)**: çµæŸå‰å¿…é ˆæ›´æ–° `task.md` ä¸¦ç¢ºä¿ç¨‹å¼ç¢¼è™•æ–¼ã€Œå¯ç·¨è­¯ (Compilable)ã€ç‹€æ…‹ã€‚

---

## ðŸš€ ç¬¬å››éƒ¨ï¼šå†·å•Ÿå‹•å”è­° (Cold Boot)
é”æˆã€Œé›¶è¨­å®šã€ç„¡ç¸«æŽ¥è»Œã€‚

### 4.1 éŒ¨é»žæª”æ¡ˆ (The Anchor Files)
Agent å•Ÿå‹•æ™‚ä¸éœ€ä¾è³´å°è©±è¨˜æ†¶ï¼Œåªéœ€è®€å–ä»¥ä¸‹ **çœŸç†ä¾†æº (Source of Truth)**ï¼š
*   **`GEMINI.md`**: Persona & Coding Style (äººè¨­èˆ‡é¢¨æ ¼)ã€‚
*   **`task.md`**: é€²åº¦ç‹€æ…‹ (State)ã€‚
*   **`implementation_plan.md`**: æž¶æ§‹è¨­è¨ˆ (Context)ã€‚

### 4.2 å†ªç­‰æ€§ (Idempotency)
*   ä¸è¦ç›²ç›®åŸ·è¡Œ `npm install`ã€‚
*   **ç’°å¢ƒæª¢æŸ¥**: Load `GEMINI.md` -> Load `task.md` -> Check `node_modules`.

---

## ðŸ›‘ ç¬¬äº”éƒ¨ï¼šå®‰å…¨èˆ‡é˜²è­·å”è­°
**[P0]** é˜²æ­¢ Agent è‡ªä¸»æ€§å¤±æŽ§èˆ‡è³‡æºæ¿«ç”¨ã€‚

### 5.1 éµå£æ²™ç®± (The Iron Sandbox)
*   **ç¦æ­¢æŒ‡ä»¤**: åš´ç¦è‡ªå‹•åŸ·è¡Œ `rm -rf /`, `mkfs`, `format`ã€‚åˆªé™¤æ“ä½œåƒ…é™æ–¼ `./tmp` æˆ– `./logs`ã€‚
*   **ä¸Šä¸‹æ–‡æ¶ˆæ¯’ (Context Sanitization)**: å†·å•Ÿå‹•å‰ï¼Œéœ€é©—è­‰ `task.md` çš„é‚è¼¯ä¸€è‡´æ€§ï¼Œé˜²æ­¢æŒ‡ä»¤æ³¨å…¥ã€‚

### 5.2 è³‡æºé…é¡ (Resource Quotas)
*   **ç€è¦½å™¨é ç®—**: æ¯å€‹ Task æœ€å¤šå•Ÿå‹• 3 æ¬¡ç€è¦½å™¨å¯¦ä¾‹ã€‚
*   **å·¥å…·èª¿ç”¨ä¸Šé™**: é˜²æ­¢æ­»å¾ªç’°ï¼Œå–®ä¸€ Turn å·¥å…·èª¿ç”¨ä¸Šé™ 50 æ¬¡ã€‚

---

## ðŸ•·ï¸ ç¬¬å…­éƒ¨ï¼šçˆ¬èŸ²é–‹ç™¼ç´€å¾‹
è§£æ±ºã€Œç‹€æ…‹å¤±æ†¶ã€èˆ‡ã€Œå·¥å…·è·³å‹•ã€å•é¡Œã€‚

### 6.1 ç†±åˆ‡æ›å”è­° (The "Hot-Swap" Protocol)
*   **æŽ›è¼‰å„ªå…ˆ**: è…³æœ¬ **å¿…é ˆ** å„ªå…ˆå˜—è©¦æŽ›è¼‰ Port 9222 (CDP)ï¼Œå¤±æ•—æ‰å•Ÿå‹• (Launch) æ–°è¦–çª—ã€‚
*   **é ‘å¼·æ¨¡å¼**: åœ¨é–‹ç™¼ç’°å¢ƒ (`ENV=DEV`) ä¸‹ï¼Œåš´ç¦ç¨‹å¼ç¢¼åŸ·è¡Œ `driver.quit()`ã€‚å¿…é ˆä¿æŒè¦–çª—é–‹å•Ÿä»¥ä¾›äººé¡žæª¢æŸ¥ã€‚

### 6.2 å–®ä¸€è·‘è€…è¦å‰‡ (The "Single Runner" Rule)
*   **çµ±ä¸€å…¥å£**: æ‰€æœ‰åŸ·è¡Œå‹•ä½œçµ±ä¸€é€éŽ `python main.py` æˆ– `make run` è§¸ç™¼ã€‚
*   **ç¦æ­¢éš¨æ„åŸ·è¡Œ**: ç¦æ­¢ç›´æŽ¥å‘¼å« `pytest` æˆ– `chrome dev` é€²è¡ŒåŠŸèƒ½é©—è­‰ï¼Œé™¤éžé€™æ˜¯ Workflow æ˜Žç¢ºå®šç¾©çš„ã€‚

---

## ðŸ§¹ ç¬¬ä¸ƒéƒ¨ï¼šæª”æ¡ˆè¡›ç”Ÿèˆ‡ç”Ÿå‘½é€±æœŸ
è§£æ±ºã€Œæ•¸ä½å †ç©ç—‡ã€èˆ‡ã€Œå¹½éˆç‰ˆæœ¬ã€ã€‚

### 7.1 ç„¡å¾Œç¶´æ”¿ç­– (The "No Suffix" Policy)
*   **å…è¨±**: `main.py`
*   **ç¦æ­¢**: `main_v2.py`, `main_new.py`, `main_backup.py`ã€‚
*   **åŸ·è¡Œ**: è‹¥éœ€è¦å‚™ä»½ï¼Œä½¿ç”¨ Git Commitã€‚è‹¥éœ€è¦é‡å¯«ï¼Œä½¿ç”¨ Git Branch (`experimental/feature-x`)ã€‚

### 7.2 å½±å­æª”æ¡ˆå”è­° (The "Shadow File" Protocol)
å…è¨±ç‚ºäº† Debug å»ºç«‹è‡¨æ™‚æª”æ¡ˆï¼Œä½†å¿…é ˆéµå®ˆ **ã€Œç„¡ç—• (Zero Trace)ã€** åŽŸå‰‡ï¼š
1.  **å‘½å**: å¿…é ˆåŒ…å« `shadow_` æˆ– `temp_` å‰ç¶´ã€‚
2.  **æ¸…ç®—**: Task çµæŸå‰ï¼Œ**å¿…é ˆ** åˆªé™¤æ‰€æœ‰ Shadow Filesã€‚
3.  **è±å… (Exemption)**: `run_result.log` æˆ– `proof/` ç›®éŒ„ä¸‹çš„é©—è­‰ç”¢ç‰©ï¼Œè¦–ç‚ºæ°¸ä¹…è³‡ç”¢ (Assets)ï¼Œ**ç¦æ­¢åˆªé™¤**ã€‚

### 7.3 Git å³å®‰å…¨ (Git-as-Safety)
*   **å¿«ç…§**: ä¿®æ”¹æ ¸å¿ƒæª”æ¡ˆå‰ï¼Œå¼·åˆ¶åŸ·è¡Œ `git commit -am "WIP"`ã€‚
*   **åˆ†æ”¯**: é‡å¤§é‡æ§‹ (ä¿®æ”¹ >20% ä»£ç¢¼é‡) å¿…é ˆåœ¨ç¨ç«‹ Branch é€²è¡Œï¼Œæ¸¬è©¦é€šéŽå¾Œæ‰ Mergeã€‚

---

## ðŸ§  ç¬¬å…«éƒ¨ï¼šèªçŸ¥è¬™éœ (Epistemic Modesty)
**[P0]** è§£æ±ºã€ŒéŽåº¦è‡ªä¿¡ã€èˆ‡ã€Œå¹»è¦ºæˆåŠŸ (Fake Success)ã€ã€‚

### 8.1 é›¶ä¿¡ä»»é©—è­‰ (The "Null Output" Trap)
**"Trust None, Verify All."**
*   **ç¦æ­¢å£é ­é©—è­‰**: Agent åš´ç¦åªèªª "I have verified it"ã€‚
*   **å·¥ä½œè­‰æ˜Ž (Proof of Work)**: å®£ç¨±ã€Œå®Œæˆã€æ™‚ï¼Œå¿…é ˆè¼¸å‡º `run_result.log` çš„æœ€å¾Œ 5 è¡Œï¼Œæˆ–ç”Ÿæˆæª”æ¡ˆçš„ Hash (e.g., `CertUtil -hashfile`) ä½œç‚ºåŠ å¯†ç´šè­‰æ˜Ž (Cryptographic Proof)ã€‚
*   **ä¾è³´æ€§æª¢æŸ¥**: å‰µå»ºæ–° Skill/Function å¾Œï¼ŒåŸ·è¡Œ `grep` è­‰æ˜Žç„¡å‘½åè¡çªã€‚

### 8.2 è™›å‡æˆåŠŸé˜²ç¦¦
*   **æª¢æŸ¥å…§æ¶µ**: åŸ·è¡Œè…³æœ¬çš„å›žå‚³å€¼ (Exit Code 0) ä¸ä»£è¡¨æˆåŠŸã€‚å¿…é ˆæª¢æŸ¥ **å…§å®¹ (Content)** æ˜¯å¦ç‚ºç©ºã€‚
*   **é›™é‡ç¢ºèª**: é—œéµåŠŸèƒ½å¿…åŸ·è¡Œå…©æ¬¡ç¨ç«‹é©—è­‰ (e.g., Check File Exists AND Check File Content Valid)ã€‚

---

## ðŸ“š ç¬¬ä¹éƒ¨ï¼šå…¨é¢æŽ¡ç´å”è­° (Universal Tool Adoption)
**[P0]** è§£æ±ºã€ŒçŸ¥è­˜ä¸è¶³ã€èˆ‡ã€Œåªè®€ä¸€åŠæ–‡æª”ã€ã€‚

### 9.1 è®€å–è‡³ EOF (Read Until EOF)
*   **å¼·åˆ¶å…¨è®€**: å¼•å…¥æ–°å·¥å…·/Library å‰ï¼Œ**å¿…é ˆ** åŸ·è¡Œ `read_file` è®€å–èªªæ˜Žæª”ã€‚
*   **åæˆªæ–· (Anti-Truncation)**: è‹¥ `read_file` é¡¯ç¤º "Truncated"ï¼ŒAgent å¿…é ˆ **ä¸»å‹• (Mandatory)** åˆ†æ®µè®€å–å‰©é¤˜éƒ¨åˆ†ï¼Œç›´åˆ°çœ‹è¦‹æ–‡ä»¶çµå°¾ã€‚åš´ç¦åªè®€å‰ 500 è¡Œå°±çžŽçŒœåŠŸèƒ½ã€‚

### 9.2 çµ±åˆå„ªå…ˆ (Synthesis First)
*   **åŠŸèƒ½ç›¤é»ž**: åœ¨ `implementation_plan.md` ä¸­ï¼Œå¿…é ˆåˆ—å‡ºè©²å·¥å…·çš„ã€Œæ‰€æœ‰åŠŸèƒ½ (100% Capabilities)ã€ï¼Œä¸¦æ˜Žç¢ºæ¨™ç¤ºã€Œæˆ‘å€‘è¦ç”¨ä»€éº¼ã€ä»¥åŠ**ã€Œæˆ‘å€‘ä¸éœ€è¦è‡ªå·±å¯«ä»€éº¼ã€**ã€‚
*   **ç¦æ­¢é€ è¼ªå­**: è‹¥ MCP/Lib å·²æœ‰åŠŸèƒ½ï¼Œåš´ç¦æ‰‹å¯«é‡è¤‡é‚è¼¯ã€‚

---

## âš™ï¸ ç¬¬åéƒ¨ï¼šæŠ€èƒ½æ²»ç† (Skill Governance)
**[P0]** è§£æ±ºã€ŒæŠ€èƒ½è„«é‰¤ã€èˆ‡ã€Œå–®ä¸€ Agent è »å¹¹ã€ã€‚

### 10.1 æŠ€èƒ½è¨»å†Šåˆ¶ (Skill Registry)
**"Don't Reinvent. Bind."**
*   **è¨»å†Š (Registry)**: æ‰€æœ‰ Skill å¿…é ˆåœ¨ `skill_manifest.json` æˆ– `handbook.md` ä¸­è¨»å†Šï¼Œä¸”æ˜Žç¢ºæŒ‡å®šè² è²¬çš„ Agentã€‚
*   **æœªè¨»å†Šå³ä¸å­˜åœ¨**: åš´ç¦åœ¨ä¸»ç¨‹å¼ `main.py` ä¸­æ’°å¯«è¶…éŽ 50 è¡Œçš„å­¤å…’é‚è¼¯ (Orphan Logic)ã€‚è¶…éŽè€…å¿…é ˆå°è£ç‚º Skillã€‚

### 10.2 ä½¿ç”¨å¯©è¨ˆ (Usage Audit)
*   **è‡ªæˆ‘å¯©æŸ¥**: æ¯å€‹ Task çµæŸå‰ï¼ŒAgent å¿…é ˆè‡ªæˆ‘å•ç­”ï¼šã€Œæˆ‘æ˜¯å¦ç•¥éŽäº†ç¾æˆçš„ Skillï¼Ÿã€ã€ã€Œæˆ‘æ˜¯å¦åªç”¨äº†ä¸€å€‹ Agent å°±æƒ³å¹¹å…¨éƒ¨çš„äº‹ï¼Ÿã€
*   **å¼·åˆ¶æ‹†åˆ†**: è‹¥ Task æ¶‰åŠ >2 å€‹ Domain (e.g., UI + DB + Network)ï¼Œå¼·åˆ¶åœ¨ `task.md` æ‹†åˆ†ç‚ºå­ä»»å‹™ï¼Œäº¤ç”±ä¸åŒ Agent/Skill è™•ç†ã€‚

---

## ðŸ“ ç¬¬åä¸€éƒ¨ï¼šçµæ§‹æ²»ç† (Structural Governance)
**[P0]** è§£æ±ºã€Œå¤§é›œç‡´ç›®éŒ„ã€ã€ã€Œè·¯å¾‘æ¨¡ç³Šã€èˆ‡ã€Œä»»å‹™æ··äº‚ã€ã€‚

### 11.1 é ˜åŸŸé©…å‹•ç›®éŒ„ (Domain-Driven Directory)
**"Root is for Context, Subs are for Code."**
*   **æ ¹ç›®éŒ„æ·¨ç©º**: æ ¹ç›®éŒ„ (Root) **åªèƒ½** å­˜æ”¾ Config æª” (`.env`, `README.md`, `GEMINI.md`)ã€‚
*   **å­ç›®éŒ„å¼·åˆ¶**: æ‰€æœ‰é‚è¼¯ä»£ç¢¼ **å¿…é ˆ** é€²å…¥å…·å‚™èªžç¾©çš„å­ç›®éŒ„ (e.g., `services/`, `core/`, `utils/`)ã€‚ç¦æ­¢å°‡æ‰€æœ‰ python æª”ä¸Ÿåœ¨æ ¹ç›®éŒ„ã€‚

### 11.2 çµ•å°è·¯å¾‘é€æ˜ŽåŒ– (Absolute Path Clarity)
**"Ambiguity is the Enemy."**
*   **ç¦æ­¢ç›¸å°è·¯å¾‘**: åœ¨ Artifacts (Task/Reports) ä¸­ï¼Œåš´ç¦ä½¿ç”¨è£¸éœ²æª”å (e.g., `config.py`)ã€‚
*   **å…¨è·¯å¾‘å ±å‘Š**: å¿…é ˆä½¿ç”¨å°ˆæ¡ˆç›¸å°è·¯å¾‘ (`src/config/config.py`) æˆ–è¶…é€£çµå½¢å¼ï¼Œè®“äººé¡ž Reviewer èƒ½ä¸€çœ¼åˆ¤å®šæª”æ¡ˆç‰©ç†ä½ç½®ã€‚

### 11.3 è„ˆçµ¡å°Žå‘çš„çµæ§‹åŒ– (Context-Driven Structuring)
**"Context Heat determines Structure"**
*   **ä¸Šä¸‹æ–‡ç†±åº¦ (Context Heat)**: ç”¨ä»¥åˆ¤æ–·ç•¶å‰ä»»å‹™æ˜¯å¦é©åˆæ‹†åˆ†æª”æ¡ˆçš„å¿ƒæ™ºæ¨¡åž‹ã€‚
    *   **ðŸ”¥ Hot (æŽ¢ç´¢/è¾¯è«–)**: åš´ç¦æ‹†åˆ†ã€‚ä¿æŒå°è©±æµ (Flow) åœ¨åŒä¸€ä»½æ–‡æª”ä¸­ç›´è‡³å®šæ¡ˆã€‚
    *   **â„ï¸ Cold (å¯¦ä½œ/å®šæ¡ˆ)**: å¼·åˆ¶æ‹†åˆ†ã€‚å°‡ä»£ç¢¼å¯«å…¥æ­£ç¢ºçš„ç‰©ç†ç›®éŒ„ (`src/`)ã€‚
*   **åŸ·è¡Œæ³•å‰‡ (The Golden Rule)**:
    *   **é è¨­å€¼ (Default)**: **Inline First (å…§åµŒå„ªå…ˆ)**ã€‚å°‡å…§å®¹è¦–ç‚º Hot Context è™•ç† (å¯«å…¥é™„éŒ„)ã€‚
    *   **è§¸ç™¼æ¢ä»¶ (Trigger)**: è‹¥å…§å®¹ç¬¦åˆä»¥ä¸‹æ¢ä»¶ï¼Œè¦–ç‚º **Cooled Down**ï¼Œå¿…é ˆè½‰ç‚º Splitï¼š
        1.  **å¤–éƒ¨å¼•ç”¨**: è©²ä»£ç¢¼å¿…é ˆè¢«å…¶ä»–ç¨‹å¼ `import`ã€‚
        2.  **è¦æ¨¡éŽå¤§**: å–®ä¸€å€å¡Šè¶…éŽ 100 è¡Œã€‚
        3.  **äºŒé€²ä½**: è³‡æºæª” (Image/Binary)ã€‚

### 11.4 ä»»å‹™åˆ†é¡žå­¸ (Taxonomy or Death)
**"No Orphan Tasks."**
*   **å‘½åæ ¼å¼**: æ‰€æœ‰ Task Name å¿…é ˆéµå®ˆ `[Domain/Component] Action` æ ¼å¼ (e.g., `[Crawler/Auth] Implement Login`)ã€‚
*   **æ¨¹ç‹€ç´€å¾‹**: ä»»ä½• Task çš„å­é …ç›® (Sub-tasks) ä¸å¾—è¶…éŽ 7 å€‹ã€‚è¶…éŽæ™‚ **å¿…é ˆ** åˆ†è£‚ (Fork) å‡ºä¸€å€‹æ–°çš„ Parent Taskï¼Œåš´ç¦æµæ°´å¸³å¼ç®¡ç†ã€‚

### 11.5 ä¸Šä¸‹æ–‡éºå‚³å”è­° (Context Inheritance)
**"Do not rely on Memory. Rely on Links."**
*   **éºå‚³éˆ (Inheritance Chain)**: ç•¶ä»»å‹™è¢« Fork ç‚ºå­ä»»å‹™æ™‚ï¼ˆå¦‚å¾ž L1 åˆ° L2ï¼‰ï¼Œå­ä»»å‹™ **å¿…é ˆ** é¡¯å¼é€£çµçˆ¶ç´šä¸Šä¸‹æ–‡çš„é—œéµ Artifact (å¦‚ Schema, Spec)ã€‚
*   **æ ¼å¼**: `- [ ] [UI] Implement Button (Context: [Schema](docs/schema.md))`ã€‚
*   **å¼·åˆ¶é‡è®€**: è™•ç†å­ä»»å‹™çš„ Agent **å¿…é ˆ** é»žæ“Šè©²é€£çµé‡è®€ Contextï¼Œåš´ç¦æ†‘å°è±¡å·¥ä½œ (Context Amnesia)ã€‚

---

## ðŸ”Ž ç¬¬åäºŒéƒ¨ï¼šæ‰¹åˆ¤æ€§è‡ªæˆ‘å¯©è¨ˆ (Critical Self-Audit)
**[P0]** è§£æ±ºã€Œå ±å–œä¸å ±æ†‚ã€ã€ã€ŒHappy Path åèª¤ã€èˆ‡ã€Œéš±åŒ¿æ€§ç¼ºé™·ã€ã€‚

### 12.1 è² å‘è­‰æ˜Žå”è­° (The Negative Proof)
**"Prove it Fails before you Prove it Works."**
*   **åå‘é©—è­‰**: åœ¨å®£ç¨±ã€ŒåŠŸèƒ½å®Œæˆã€å‰ï¼Œå¿…é ˆå…ˆè­‰æ˜Žå®ƒã€Œèƒ½æ­£ç¢ºè™•ç†å¤±æ•—ã€(Graceful Failure)ã€‚
*   **å¼·åˆ¶æ¡ˆä¾‹**: çµæ¡ˆå ±å‘Šä¸­å¿…åŒ…å«è‡³å°‘ä¸€å€‹ **Failure Case** (e.g., è¼¸å…¥ç„¡æ•ˆ Token æ‡‰å›žå‚³ 403 è€Œéž 500)ã€‚è‹¥åªæœ‰ Success Caseï¼Œè¦–ç‚º **ã€Œæœªé©—è­‰ (Unverified)ã€**ã€‚

### 12.2 ä½†æ›¸å”è­° (The "But" Clause)
**"Disclosure is Mandatory."**
*   **æ­éœ²ç¾©å‹™**: åš´ç¦ç™¼é€åªæœ‰ã€Œå¥½æ¶ˆæ¯ã€çš„çµæ¡ˆå ±å‘Šã€‚
*   **å·²çŸ¥ç¼ºé™·**: å¿…é ˆåŒ…å« **"âš ï¸ å·²çŸ¥é™åˆ¶ / é¢¨éšª"** ç« ç¯€ã€‚
*   **æ¥µé™æ¸¬è©¦**: è‹¥æ‰¾ä¸å‡ºç¼ºé»žï¼Œå¿…é ˆè²æ˜Žï¼šã€Œå·²å˜—è©¦ X, Y, Z æ¥µé™æ¸¬è©¦çš†é€šéŽï¼Œä½†ä»å¯èƒ½åœ¨ ... å­˜åœ¨éš±æ†‚ã€‚ã€

### 12.3 äººå·¥ä»‹å…¥æ¨™ç¤º (Human-in-the-Loop Highlight)
**"Don't hide the ugly parts."**
*   **é†œé™‹æ¨™ç±¤**: å°æ–¼ç¡¬ç·¨ç¢¼ (Hardcoded)ã€æš«æ™‚è§£æ³• (Workaround) æˆ–ä¸ç¢ºå®šé‚è¼¯ï¼Œå¼·åˆ¶æ¨™è¨» `# FIXME`, `# WARNING`, `# TODO`ã€‚
*   **ä¸»å‹•æç¤º**: åœ¨äº¤ä»˜æ™‚ï¼Œå¿…é ˆå°‡é€™äº›ã€Œé†œé™‹æ¨™ç±¤ã€å½™æ•´åˆ—å‡ºï¼Œä¸»å‹•é‚€è«‹äººé¡žé€²è¡Œæ·±åº¦è§€å¯Ÿï¼Œè€Œéžç­‰å¾…è¢«ç™¼ç¾ã€‚

---

## â™¾ï¸ ç¬¬åä¸‰éƒ¨ï¼šæŒçºŒæ”¹é€²å”è­° (Continuous Improvement)
**[P0]** è§£æ±ºã€ŒéŽæ—©çµæ¡ˆ (Premature Closure)ã€èˆ‡ã€ŒæŠ€è¡“å‚µå †ç©ã€ã€‚

### 13.1 ç„¡æœ€çµ‚ç‰ˆå”è­° (No "Final Version")
**"Code is Never Finished, Only Abandoned."**
*   **ç¦èªž**: åš´ç¦ä½¿ç”¨ã€Œå®Œç¾Ž (Perfect)ã€ã€ã€Œå…¨éƒ¨å®Œæˆ (All Done)ã€ã€ã€Œæœ€çµ‚ç‰ˆ (Final Version)ã€ç­‰çµ•å°æ€§è©žå½™ã€‚
*   **ç‰ˆæœ¬æ…£ä¾‹**: äº¤ä»˜ç‰©å¿…é ˆæ¨™è¨˜ç‚º **Vx.x (Stable)** æˆ– **Vx.x (RC)**ï¼Œæš—ç¤ºæœªä¾†è¿­ä»£ç©ºé–“ã€‚
*   **ä¸‹ä¸€æ­¥**: çµæ¡ˆå ±å‘Šå¿…åŒ…å« **"Next Steps"**ã€‚

### 13.2 å‚µå‹™ç™»è¨˜ç°¿ (Debt Register)
**"Admit Your Sins."**
*   **æ‰¿èªå‚µå‹™**: åœ¨ `task.md` æˆ– `implementation_plan.md` åº•éƒ¨ï¼Œå¿…é ˆç¶­è­· **"Tech Debt / Known Issues"** æ¸…å–®ã€‚
*   **çµæ¡ˆå®£å‘Š**: è‹¥å‚µå‹™æ¸…å–®éžç©ºï¼Œçµæ¡ˆèªžå¥å¿…é ˆç‚ºï¼šã€Œæœ¬éšŽæ®µä»»å‹™å·²å®Œæˆï¼Œä½†ç•™æœ‰ 3 é …å·²çŸ¥å‚µå‹™...ã€ã€‚

### 13.3 åŒæ­¥æª¢æŸ¥ (Sync Check)
**"Don't Lie to the Checkbox."**
*   **åº«å­˜ç›¤é»ž**: åœ¨å‘¼å« `notify_user` èªª "I'm done" å‰ï¼Œå¿…é ˆè‡ªæˆ‘æª¢æŸ¥ `task.md` æ˜¯å¦é‚„æœ‰ `[ ]`ã€‚
*   **ç¦æ­¢åˆªé™¤**: åš´ç¦å°‡æœªå®Œæˆçš„ Task ç›´æŽ¥åˆªé™¤ä»¥å½é€ é€²åº¦ã€‚æœªå®Œæˆé …ç›®å¿…é ˆæ¨™ç¤ºç‚º `[Skipped]` ä¸¦é™„ä¸Šç†ç”±ã€‚


## ðŸ¤– ç¬¬åå››éƒ¨ï¼šè‡ªå‹•åŒ–åŸ·æ³•å”è­° (Automated Enforcement)
**[P0]** è§£æ±ºã€Œæ„åœ–æ²»ç†å¤±æ•ˆã€èˆ‡ã€Œè¡›ç”Ÿæ­»è§’ã€ã€‚

### 14.1 æäº¤å‰æŽƒæ (Pre-Commit Scan)
*   **å·¥å…·**: `python c:/antigravity/scripts/pre_commit_scan.py`
    *   **å•Ÿå‹•ç¨‹åº (Bootstrap)**: è‹¥è…³æœ¬ä¸å­˜åœ¨ï¼ŒAgent **å¿…é ˆ** å…ˆåƒè€ƒ Rule 14.3 (å·¥å…·é‚„åŽŸ) åŸ·è¡Œé‚„åŽŸã€‚
*   **æ™‚æ©Ÿ**: æ¯æ¬¡ `git add` ä¹‹å‰ï¼Œæˆ–ä»»å‹™çµæŸå‰ã€‚
*   **å¼·åˆ¶æ€§**: å¿…é ˆ Exit Code 0 æ‰èƒ½æäº¤ã€‚åš´ç¦ Hardcoded Secrets (sk-...) èˆ‡éžæ³•å¾Œç¶´æª”åã€‚

### 14.2 å¹½éˆå‰‹æ˜Ÿ (Ghost Buster)
*   **å·¥å…·**: `python c:/antigravity/scripts/ghost_buster.py`
*   **æ™‚æ©Ÿ**: è½‰æ› Agent è§’è‰²æ™‚ï¼Œæˆ–ä»»å‹™å®Œæˆ (`notify_user`) å‰ã€‚
*   **æ¸…é›¶åŽŸå‰‡**: ä»»ä½•è¢«æ¨™è¨˜ç‚º "Ghost" çš„æª”æ¡ˆå¿…é ˆåœ¨äº¤æŽ¥å‰æ¸…é™¤ã€‚

### 14.3 å·¥å…·é‚„åŽŸå”è­° (Tool Bootstrap)
*   è‹¥ç™¼ç¾ `scripts/` ç›®éŒ„ç¼ºå¤±ï¼ŒAgent æ‡‰ä¸»å‹•å¾ž `rules/tools/enforcement_scripts.md` è®€å–é‚è¼¯ä¸¦é‡å»ºè…³æœ¬ï¼Œä¸éœ€è©¢å•äººé¡žã€‚

---

## ðŸ§¬ ç¬¬åäº”éƒ¨ï¼šæŠ€èƒ½æ¼”åŒ–å”è­° (Skill Evolution Protocol)
**[P0]** è§£æ±ºã€ŒSkill éŽè¼‰ã€èˆ‡ã€Œé‚è¼¯ç„¡æ³•æˆé•·ã€çš„çŸ›ç›¾ã€‚

### 15.1 æ™ºæ…§åŠ è¼‰ (Smart Loader Logic)
**"Don't Load All. Load What You Need."**
*   **å·¥å…·**: `python scripts/skill_loader.py`
1.  **ç´¢å¼•å±¤ (Layer 1 - Lite)**: Agent å•Ÿå‹•æ™‚ï¼Œ**åªè®€å–** `skill_manifest.json` (æ¸…å–®) æˆ–æ˜¯åŸ·è¡Œ `skill_loader.py --scan`ã€‚
2.  **ç™¼ç¾å±¤ (Layer 2 - Just-in-Time)**: ç•¶è§£æž User Request å¾Œï¼ŒåŸ·è¡Œèªžæ„å°æ‡‰ (Semantic Mapping)ï¼Œ**åªè®€å–** ç›¸é—œçš„ `skills/*.md`ã€‚
    *   *Example*: ä»»å‹™æ˜¯ã€Œç™»å…¥ã€ï¼Œå‰‡åªè®€å– `skill_auth.md`ï¼Œä¸è®€å– `skill_crawler.md`ã€‚

### 15.2 æ¼”åŒ–æ³•å‰‡ (The Evolution Rule)
**"If it's new, it's a Skill."**
1.  **ç¦æ­¢å­¤å…’é‚è¼¯ (No Orphan Logic)**: åš´ç¦åœ¨ `main.py` æˆ– `services/` ä¸­æ’°å¯«ã€Œå¯è¢«é‡è¤‡ä½¿ç”¨ã€çš„æ–°é‚è¼¯ (e.g. åŠ å¯†ã€è½‰æª”ã€API å‘¼å«)ã€‚
2.  **ç”Ÿæˆæµç¨‹ (Generation Flow)**:
    *   **Step 1**: ç™¼ç¾ç¼ºå£ (Missing Skill)ã€‚
    *   **Step 2**: æ’°å¯«è‰ç¨¿ `skills/new_skill_name.md` (å®šç¾© Interface/Dependency)ã€‚
    *   **Step 3**: è«‹æ±‚ Human Reviewã€‚
    *   **Step 4**: é€šéŽå¾Œï¼Œæ‰é–‹å§‹å¯« Codeã€‚


### 15.3 ç‰ˆæœ¬æŽ§åˆ¶ (Interface Locking)
1.  **éŽ–å®š (Lock)**: Skill ä¸€æ—¦è¢« 2 å€‹ä»¥ä¸Š Agent å¼•ç”¨ï¼Œå³è¦–ç‚º **Immutable (ä¸å¯è®Š)**ã€‚
2.  **å‡ç´š**: è‹¥éœ€ä¿®æ”¹ Interfaceï¼Œå¿…é ˆï¼š
    *   å»ºç«‹æ–°ç‰ˆ (e.g., `skill_v2.md`)ã€‚
    *   æˆ–åŸ·è¡Œå…¨åŸŸ grepï¼ŒåŒæ­¥ä¿®å¾©æ‰€æœ‰å¼•ç”¨è™•ã€‚

---

## ðŸ—ï¸ ç¬¬åå…­éƒ¨ï¼šå¯åŸ·è¡Œæ±ºç­–æž¶æ§‹ (Executable Decision Architecture)
**[P0]** è§£æ±ºã€Œå”å®šåƒ…ç‚ºæ–‡æª”ã€çš„ç„¡æ•ˆåŒ–é¢¨éšªã€‚

### 16.1 æ±ºç­–è…³æœ¬åŒ– (Decisions as Code)
**"Don't Think. Run."**
*   **L0 è·¯ç”±å™¨**: ä»»ä½•é—œæ–¼ã€Œæª”æ¡ˆä½ç½®ã€æˆ–ã€Œä»»å‹™æ‹†åˆ†ã€çš„æ±ºç­–ï¼Œ**å¿…é ˆ** å„ªå…ˆè©¢å• `scripts/decision_router.py`ã€‚
    *   *Usage*: `python scripts/decision_router.py --check context`
*   **L1 æŠ€èƒ½åŠ è¼‰å™¨**: Agent å•Ÿå‹•æˆ–åˆ‡æ›ä»»å‹™æ™‚ï¼Œ**å¿…é ˆ** åŸ·è¡Œ `scripts/skill_loader.py --audit` ç¢ºä¿æŠ€èƒ½åº«å¥åº·ã€‚

### 16.2 è­‰æ˜Žé©…å‹•çš„æž¶æ§‹ (Proof-Driven Architecture)
*   **å¼·åˆ¶è­‰æ˜Ž**: ç•¶ Agent æ±ºå®šã€Œä¸æ‹†åˆ†ã€æˆ–ã€Œä¸ä½¿ç”¨ Skillã€æ™‚ï¼Œå¿…é ˆåœ¨ `thought` å€å¡Šä¸­å¼•ç”¨ `decision_router.py` çš„è¼¸å‡ºè­‰æ˜Žã€‚


---


## ðŸ“š é™„éŒ„ï¼šæ¨¡çµ„åŒ–ç´¢å¼• (Modular Index)
æœ¬å”è­°æŽ¡ç³»çµ±åŒ–ç®¡ç†ï¼Œè©³ç´°æ­·ç¨‹èˆ‡å·¥å…·è«‹åƒé–±ä»¥ä¸‹æ¨¡çµ„ï¼š

### ðŸ“‚ æ­·å²èˆ‡æ±ºç­– (History & Decisions)
*   **[ç´…éšŠæ¼”ç·´èˆ‡æ¼æ´žå ±å‘Š (Red Team Ledger)](file:///C:/antigravity/rules/history/red_team_ledger.md)**: ç´€éŒ„ V2 ç‰ˆæœ¬å£“åŠ›æ¸¬è©¦çµæžœèˆ‡å·²ä¿®è£œæ¼æ´žã€‚
*   **[æ·±åº¦è¾¯è­‰å¯©è¨ˆå ±å‘Š (Deep Dialectical Audit)](file:///C:/antigravity/rules/history/audit_jan_2026.md)**: ç´€éŒ„ V2.4 ç‰ˆæœ¬çš„è‡ªæˆ‘å¯©æŸ¥èˆ‡é‚è¼¯ä¿®å¾©ã€‚
*   **[æ±ºç­–æ­·ç¨‹ (Decision Log)](file:///C:/antigravity/rules/history/decision_log_2026.md)**: ç´€éŒ„é—œéµå”è­° (å¦‚ Protocol 11.3) çš„è¾¯è­‰èˆ‡æ±ºç­–é‚è¼¯ã€‚
*   **[è¯é‚¦å¼æ±ºç­–æ¨¹ (Federated Decision Tree)](file:///C:/antigravity/rules/decision_tree.md)**: Agent è¡Œç‚ºæ±ºç­–çš„æ ¸å¿ƒè·¯ç”± (Master Router)ã€‚
    *   **[Skill A: æž¶æ§‹æ±ºç­–](file:///C:/antigravity/skills/skill_decision_architecture.md)**
    *   **[Skill B: å®‰å…¨æ±ºç­–](file:///C:/antigravity/skills/skill_decision_safety.md)**
    *   **[Skill C: é©—è­‰æ±ºç­–](file:///C:/antigravity/skills/skill_decision_verification.md)**

### ðŸ› ï¸ å·¥å…·èˆ‡å¯¦ä½œ (Tools & Implementation)
### ðŸ› ï¸ å·¥å…·èˆ‡å¯¦ä½œ (Tools & Implementation)
*   **[åŸ·æ³•å·¥å…·åƒè€ƒå¯¦ä½œ (Enforcement Scripts)](file:///C:/antigravity/rules/tools/enforcement_scripts.md)**: `pre_commit_scan.py` èˆ‡ `ghost_buster.py` çš„æ¨™æº–å¯¦ä½œé‚è¼¯ã€‚
*   **L0 Decision Router**: `script/decision_router.py` (Protocol 16.1)ã€‚
*   **L1 Skill Loader**: `script/skill_loader.py` (Protocol 15.1)ã€‚

---

## ðŸš€ é™„éŒ„ D: å‰µä¸–å•Ÿå‹•é…ç½® (The Genesis Bootstrap)
ç‚ºç¢ºä¿ç³»çµ±èƒ½è‡ªæˆ‘æ¼”åŒ–ï¼Œå»ºè­°å°ˆæ¡ˆå•Ÿå‹•æ™‚æŽ¡ç”¨ä»¥ä¸‹ **ã€Œ3 Agents + 8 Skillsã€** æœ€å°é‹ä½œé…ç½®ï¼š

### D.1 ä¸‰å¤§æ ¸å¿ƒè§’è‰² (The Trinity of Roles)
1.  **Agent A: Architect (æž¶æ§‹å¸«)**
    *   **è·è²¬**: **Brain**. åªè®€ä¸å¯« (Code)ã€‚è² è²¬æ’°å¯« `implementation_plan.md` èˆ‡å®šç¾© Specã€‚
    *   **Data First**: è¦åŠƒå‰å¿…é ˆä½¿ç”¨ `skill_db_inspector` ç²å–çœŸå¯¦ Schemaï¼Œåš´ç¦æ†‘ç©ºè¨­è¨ˆã€‚
    *   **YAGNI æŒ‡ä»¤**: å¿…é ˆæœ€å¤§åŒ–ç©©å¥æ€§ï¼Œä½†æœ€å°åŒ–æ”»æ“Šé¢ã€‚**ã€Œè‹¥éž User æ˜Žç¢ºè¦æ±‚ï¼Œä¸€å¾‹è¦–ç‚º Future Scopeã€**ã€‚
2.  **Agent B: Tech Lead (å®ˆé–€å“¡)**
    *   **è·è²¬**: **Guard**. è² è²¬ Protocol 14/15 åŸ·æ³•ï¼Œä¸¦æ“æœ‰ **Scope Veto (ç¯„åœå¦æ±ºæ¬Š)**ã€‚
    *   **Pre-Flight Inspection**: å…è¨± Builder é–‹å·¥å‰ï¼Œå¿…é ˆä½¿ç”¨ `skill_impact_analysis` é€²è¡Œä¾è³´è©•ä¼°ã€‚
3.  **Agent C: Builder (å·¥å…µ)**
    *   **è·è²¬**: **Hand**. å”¯ä¸€èƒ½åŸ·è¡Œ `write_to_file` çš„è§’è‰²ã€‚
    *   **Evidence-Based Commit**: æäº¤å¾Œç«¯ä»£ç¢¼å¿…é™„ `skill_api_tester` å ±å‘Šï¼›æäº¤å‰ç«¯å¿…é™„ `skill_visual_snapshot`ã€‚
    *   **Context Inheritance**: éµå®ˆ Protocol 11.5ï¼Œå¾žçˆ¶ä»»å‹™ç¹¼æ‰¿ Schema Contextã€‚

### D.2 å…«å¤§ç¨®å­æŠ€èƒ½ (The Seed Skills)
1.  **`skill_meta_skill_generator`**: å®šç¾©ã€Œå¦‚ä½•å¯«æ¨™æº– Skillã€çš„æ¨¡ç‰ˆã€‚
2.  **`skill_project_structure`**: å®šç¾©ç›®éŒ„çµæ§‹èˆ‡æª”æ¡ˆæ­¸æ”¾é‚è¼¯ã€‚
3.  **`skill_defensive_io`**: å®šç¾©å¥å£¯çš„æª”æ¡ˆè®€å¯«æ¨¡å¼ (Try-Catch-Log)ã€‚
4.  **`skill_log_standard`**: å®šç¾©è·¨ Agent æºé€šçš„ Log æ ¼å¼ã€‚
5.  **`skill_impact_analysis` (Nav)**: å®šç¾©å¦‚ä½•æœå°‹ã€Œçˆ†ç‚¸åŠå¾‘ã€èˆ‡ä¾è³´è¿½è¹¤ã€‚
6.  **`skill_db_inspector` (Data)**: å®šç¾©è³‡æ–™åº« Schema è¦–è¦ºåŒ–èˆ‡æ•¸æ“šé è¦½æ¨™æº– (DataGrip æ›¿ä»£å“)ã€‚
7.  **`skill_api_tester` (Backend)**: å®šç¾© Stateful API æ¸¬è©¦èˆ‡ Token ç®¡ç†æ¨™æº– (Postman æ›¿ä»£å“)ã€‚
---

## ðŸ¢ ç¬¬åä¸ƒéƒ¨ï¼šæ¥­å‹™ç³»çµ± Agent åˆ†å·¥ (The Triad for Business Systems)
> **æ–°å¢žæ–¼**: 2026-01-18 (V2.5)
> **ä¾†æº**: Chen Zhen Fang ERP å¯¦æˆ°ç¶“é©—

å°æ–¼ ERPã€LINE Botã€é›»å•†ç­‰æ¥­å‹™ç³»çµ±ï¼Œå»ºè­°æŽ¡ç”¨ä»¥ä¸‹ Agent åˆ†å·¥ï¼š

| Agent | è§’è‰² | è·è²¬ |
| :--- | :--- | :--- |
| **Agent D: Data** | è³‡æ–™å±¤ | DB Schema, Migrations, Seeding, Query Optimization |
| **Agent E: Integration** | æ•´åˆå±¤ | External APIs (LINE, Payment, Shipping), Webhooks, OAuth |
| **Agent F: Domain** | æ¥­å‹™å±¤ | Business Rules, Accounting, NLP, Cultural/Religious Logic |

---

## ðŸŒ ç¬¬åå…«éƒ¨ï¼šBrowser Subagent ç´€å¾‹ (Protocol 17)
> **æ–°å¢žæ–¼**: 2026-01-18 (V2.5)

### 17.1 ä½•æ™‚ä½¿ç”¨ Browser Subagent
*   **æ†‘è­‰æå–**: å¾ž Web Console æŠ“å– API Tokenã€Secret (e.g., LINE, ngrok, AWS)
*   **é…ç½®è¨­å®š**: è¨­å®š Webhook URLã€OAuth Callback ç­‰éœ€è¦ UI æ“ä½œçš„ä»»å‹™
*   **è¦–è¦ºé©—è­‰**: é©—è­‰ Webhook é€£ç·šã€æˆªåœ– UI ç‹€æ…‹

### 17.2 ä½•æ™‚ä¸ä½¿ç”¨
*   **éœæ…‹æ–‡ä»¶**: ä½¿ç”¨ `read_url_content` è®€å– API æ–‡ä»¶
*   **å¯ç¨‹å¼åŒ– API**: èƒ½ç”¨ CLI/Code å®Œæˆçš„ä¸ç”¨ç€è¦½å™¨

### 17.3 éŒ„è£½æ”¿ç­–
*   æ‰€æœ‰ Subagent å‹•ä½œè‡ªå‹•éŒ„è£½ç‚º `.webp`
*   å­˜æ”¾æ–¼ `.system_generated/` ä»¥ä¾›å¯©è¨ˆ

---

## ðŸ“¦ ç¬¬åä¹éƒ¨ï¼šSkill è‡ªå‹•çµæ™¶å”è­° (Protocol 18)
> **æ–°å¢žæ–¼**: 2026-01-18 (V2.5)

### 18.1 è§¸ç™¼æ¢ä»¶
ç•¶ä»¥ä¸‹æƒ…æ³ç™¼ç”Ÿæ™‚ï¼Œ**å¿…é ˆ** å»ºç«‹æ–° Skill æ–‡ä»¶ï¼š
1.  **å¯é‡ç”¨æ¨¡å¼**: å‡ºç¾å¯æŠ½è±¡çš„é‚è¼¯ (e.g., NLP Parser, API Wrapper)
2.  **é‡è¤‡ä½¿ç”¨ 3 æ¬¡ä»¥ä¸Š**: ç›¸åŒç¨‹å¼ç¢¼çµæ§‹å‡ºç¾ 3 æ¬¡
3.  **æ¥­å‹™é‚è¼¯æ–‡ä»¶åŒ–**: éœ€è¦è®“éžæŠ€è¡“äººå“¡ç†è§£çš„æ¥­å‹™è¦å‰‡

### 18.2 Skill æ¨™æº–æ¨¡æ¿
```yaml
---
name: [skill_name]
version: 1.0.0
dependencies: [list]
---
# [Skill Name]
## Purpose
## Core Functions
## Usage
## Gotchas
```

---

## ðŸ” ç¬¬äºŒåéƒ¨ï¼šæ†‘è­‰ç”Ÿå‘½é€±æœŸç®¡ç† (Protocol 19)
> **æ–°å¢žæ–¼**: 2026-01-18 (V2.5)

### 19.1 ä½”ä½ç¬¦æ…£ä¾‹
*   ä½¿ç”¨ `YOUR_XXX_HERE_PLEASE_UPDATE` ä½œç‚ºæ¨™è¨˜
*   ç³»çµ±é¦–æ¬¡é‹è¡Œæ™‚ **å¿…é ˆ** æª¢æŸ¥é€™äº›ä½”ä½ç¬¦ä¸¦ä¸­æ­¢åŸ·è¡Œ

### 19.2 Browser æå–æµç¨‹
1.  æª¢æŸ¥ `.env` æ˜¯å¦æœ‰ä½”ä½ç¬¦
2.  è‹¥æœ‰ï¼Œèª¿ç”¨ Browser Subagent å¾ž Console æå–
3.  æ›´æ–° `.env` ä¸¦ç«‹å³åŠ å…¥ `.gitignore`

### 19.3 ç¦æ­¢è¡Œç‚º
*   **åš´ç¦** åœ¨ç¨‹å¼ç¢¼ä¸­ç¡¬ç·¨ç¢¼çœŸå¯¦æ†‘è­‰
*   **åš´ç¦** å°‡ `.env` æäº¤è‡³ Git

---

## ðŸ“– ç¬¬äºŒåä¸€éƒ¨ï¼šé ˜åŸŸçŸ¥è­˜æ²»ç† (Protocol 20)
> **æ–°å¢žæ–¼**: 2026-01-18 (V2.5)

### 20.1 éœæ…‹è³‡æ–™ä¾†æº
*   å¿…é ˆå­˜æ”¾æ–¼ `data/` ç›®éŒ„ (JSON/CSV)
*   å¿…é ˆç‰ˆæœ¬æŽ§åˆ¶ï¼Œç¦æ­¢å‹•æ…‹ç”Ÿæˆé—œéµæ•¸æ“š

### 20.2 ç¢ºå®šæ€§å„ªå…ˆåŽŸå‰‡
å°æ–¼ **é›¶å®¹éŒ¯é ˜åŸŸ** (å®—æ•™ã€é†«ç™‚ã€æ³•å¾‹)ï¼š
*   **ç¦æ­¢** ä½¿ç”¨ LLM ç”Ÿæˆç­”æ¡ˆ (Hallucination Risk)
*   **å¿…é ˆ** ä½¿ç”¨ç¶“é©—è­‰çš„å‡½å¼åº« (e.g., `lunar-python`) æˆ–äººå·¥å¯©æ ¸è³‡æ–™åº«

---

## ðŸ—ƒï¸ ç¬¬äºŒåäºŒéƒ¨ï¼šSQLite æœ€ä½³å¯¦è¸
> **æ–°å¢žæ–¼**: 2026-01-18 (V2.5)

### 22.1 å¼·åˆ¶çµ•å°è·¯å¾‘
```python
import os
BASE_DIR = os.path.abspath(os.path.dirname(__file__))
DB_PATH = os.path.join(BASE_DIR, 'data', 'mydb.db')
app.config['SQLALCHEMY_DATABASE_URI'] = f"sqlite:///{DB_PATH}"
```

### 22.2 ç¦æ­¢ç›¸å°è·¯å¾‘
*   `sqlite:///data/mydb.db` **åš´ç¦** (å·¥ä½œç›®éŒ„è®Šæ›´æœƒå°Žè‡´å¤±æ•—)

---

## ðŸ” ç¬¬äºŒåä¸‰éƒ¨ï¼šè‡ªæˆ‘å¯©æŸ¥æ©Ÿåˆ¶ (Protocol 21: Self-Review for Playbook Evolution)
> **æ–°å¢žæ–¼**: 2026-01-18 (V2.5)
> **è§¸ç™¼åŽŸå› **: Playbook æ—©æœŸä¸Šç·šï¼Œéœ€è¦æŒçºŒå„ªåŒ–

### 21.1 é›™å±¤å¯©æŸ¥æž¶æ§‹ (Two-Layer Audit)
æ¯æ¬¡ä»»å‹™å®Œæˆå¾Œï¼ŒAgent **å¿…é ˆ** åŸ·è¡Œå…©å±¤å¯©æŸ¥ï¼š

#### Layer 1: åˆè¦æª¢æŸ¥ (Compliance Check)
```markdown
## ðŸ” Playbook Compliance Check
- [ ] æ˜¯å¦æœ‰éºæ¼çš„ Skill éœ€è¦å»ºç«‹ï¼Ÿ (Protocol 18)
- [ ] æ˜¯å¦æœ‰ç¡¬ç·¨ç¢¼çš„æ†‘è­‰ï¼Ÿ (Protocol 19)
- [ ] æ˜¯å¦ä½¿ç”¨äº†ç›¸å°è·¯å¾‘çš„ SQLiteï¼Ÿ (Protocol 22)
- [ ] æ˜¯å¦æœ‰ Browser Subagent ä½¿ç”¨ä¸ç•¶ï¼Ÿ (Protocol 17)
- [ ] æ˜¯å¦æœ‰é ˜åŸŸçŸ¥è­˜éœ€è¦éœæ…‹åŒ–ï¼Ÿ (Protocol 20)
```

#### Layer 2: ç³»çµ±æ€§ç¼ºé™·æª¢è¨Ž (Systemic Defect Review) ðŸ†•
**æ¯é …å¿…é ˆå›žç­”ä¸‰å€‹å•é¡Œï¼šç™¼ç¾ â†’ åˆ†æž â†’ è§£æ±º**

| æª¢æŸ¥é …ç›® | å¦‚ä½•åµæ¸¬ï¼Ÿ | å¦‚ä½•åˆ†æžï¼Ÿ | å¦‚ä½•è§£æ±ºï¼Ÿ |
| :--- | :--- | :--- | :--- |
| **Root Cause** | ä»»å‹™å¤±æ•—æˆ–æ•ˆçŽ‡ç•°å¸¸ä½Ž | ä½¿ç”¨ã€Œ5 Whysã€è¿½æº¯æ ¹æœ¬åŽŸå›  | è‹¥æ˜¯äººç‚ºéŒ¯èª¤ â†’ åŠ å…¥ Checklistï¼›è‹¥æ˜¯ç³»çµ±ç¼ºé™· â†’ ä¿®æ”¹ Protocol |
| **Protocol Gap** | ç™¼ç¾ Playbook æ²’æœ‰æ¶µè“‹çš„æƒ…å¢ƒ | æ¯”å°ç¾æœ‰ Protocol æ¸…å–® | èµ·è‰æ–° Protocol ä¸¦åŠ å…¥ Playbook |
| **Architecture Flaw** | éœ€è¦ç¹žéŽè¨­è¨ˆæ‰èƒ½å®Œæˆä»»å‹™ | ç¹ªè£½æµç¨‹åœ–æ‰¾å‡ºç“¶é ¸ | é‡æ§‹å—å½±éŸ¿çš„æ¨¡çµ„ï¼›æ›´æ–° `implementation_plan.md` |
| **Tool Limitation** | å·¥å…·ç„¡æ³•å®Œæˆé æœŸæ“ä½œ | å˜—è©¦æ›¿ä»£æ–¹æ¡ˆï¼›æœå°‹æ–‡ä»¶ | 1) ç°¡åŒ–éœ€æ±‚ 2) æ Feature Request 3) é–‹ç™¼æ–° Skill |
| **Knowledge Gap** | åšå‡ºéŒ¯èª¤æ±ºç­–æˆ–éºæ¼é‡è¦è³‡è¨Š | å›žé¡§å“ªäº›çŸ¥è­˜æ‡‰è©²äº‹å…ˆçŸ¥é“ | å»ºç«‹ Knowledge Item æˆ–æ›´æ–° Skill æ–‡ä»¶ |
| **User Experience** | ä½¿ç”¨è€…æŠ±æ€¨æˆ–éœ€è¦å¤šæ¬¡ç¢ºèª | çµ±è¨ˆä½¿ç”¨è€…å¹²é æ¬¡æ•¸ | ç°¡åŒ–æµç¨‹ï¼›å¢žåŠ è‡ªå‹•åŒ–ï¼›æ”¹å–„æç¤ºè¨Šæ¯ |

**ç¯„ä¾‹**ï¼š
```
å•é¡Œ: Bot ç„¡å›žæ‡‰
åµæ¸¬: Webhook æ¸¬è©¦æˆåŠŸä½†è¨Šæ¯ç„¡å›žè¦†
åˆ†æž (5 Whys):
  1. ç‚ºä»€éº¼ç„¡å›žè¦†? â†’ Server æ”¶åˆ°è«‹æ±‚ä½†å ±éŒ¯
  2. ç‚ºä»€éº¼å ±éŒ¯? â†’ Database connection failed
  3. ç‚ºä»€éº¼é€£ç·šå¤±æ•—? â†’ ç›¸å°è·¯å¾‘åœ¨ä¸åŒ CWD ä¸‹å¤±æ•ˆ
  4. ç‚ºä»€éº¼ç”¨ç›¸å°è·¯å¾‘? â†’ æ²’æœ‰ Protocol è¦ç¯„
  5. æ ¹æœ¬åŽŸå› : Playbook ç¼ºå°‘ SQLite è·¯å¾‘è¦ç¯„
è§£æ±º: æ–°å¢ž Protocol 22 (SQLite çµ•å°è·¯å¾‘è¦å‰‡)
```

### 21.2 ç¼ºé™·åˆ†é¡žèˆ‡è™•ç† (Defect Classification)
| é¡žåž‹ | æè¿° | è™•ç†æ–¹å¼ |
| :--- | :--- | :--- |
| **P0 Critical** | ç³»çµ±æž¶æ§‹ç¼ºé™·ï¼Œå°Žè‡´ç„¡æ³•å®Œæˆä»»å‹™ | ç«‹å³åœæ­¢ï¼Œå»ºç«‹ Issueï¼Œä¿®æ­£å¾Œæ‰èƒ½ç¹¼çºŒ |
| **P1 High** | Protocol è¨­è¨ˆä¸åˆç†ï¼Œå°Žè‡´æ•ˆçŽ‡ä½Žä¸‹ | è¨˜éŒ„ `[PLAYBOOK_GAP]`ï¼Œå°è©±çµæŸå‰ä¿®æ­£ |
| **P2 Medium** | å·¥å…·ä½¿ç”¨ä¸ç•¶æˆ–çŸ¥è­˜ç¼ºå¤± | è¨˜éŒ„ä¸¦åœ¨ä¸‹æ¬¡å°è©±æ”¹é€² |
| **P3 Low** | å°å„ªåŒ–å»ºè­° | è¨˜éŒ„åˆ° Backlog |

### 21.3 ç«‹å³ä¿®æ­£æ±ºç­–æ¨¹ (Fix Now or Defer?) ðŸ†•
ç™¼ç¾å•é¡Œå¾Œï¼Œä½¿ç”¨ä»¥ä¸‹æ±ºç­–æ¨¹åˆ¤æ–·æ˜¯å¦ç«‹å³ä¿®æ­£ï¼š

```
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  ç™¼ç¾å•é¡Œ/ç¼ºé™·      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Q1: æ˜¯å¦é˜»æ“‹ç•¶å‰ä»»å‹™å®Œæˆï¼Ÿ  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    YES     â”‚     NO
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                                   â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ðŸ”´ ç«‹å³ä¿®æ­£  â”‚               â”‚ Q2: ä¿®æ­£æ™‚é–“ > 10åˆ†é˜ï¼Ÿâ”‚
   â”‚ (P0 Critical)â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    YES    â”‚    NO
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â–¼                               â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ Q3: ä½¿ç”¨è€…æ˜Žç¢º  â”‚             â”‚ ðŸŸ¡ é †æ‰‹ä¿®æ­£     â”‚
                     â”‚ åŒæ„å»¶å¾Œå—Žï¼Ÿ    â”‚             â”‚ (ä¿æŒå¿ƒæµ)      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        YES   â”‚   NO
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                               â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ ðŸŸ¢ è¨˜éŒ„åˆ° Backlogâ”‚             â”‚ ðŸŸ  æœ¬å°è©±çµæŸå‰ â”‚
     â”‚ (P2/P3 Defer)   â”‚             â”‚ å¿…é ˆä¿®æ­£ (P1)   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¿«é€Ÿåˆ¤æ–·è¦å‰‡**ï¼š
- **P0**: ç„¡æ³•ç¹¼çºŒ â†’ **ç«‹å³åœæ­¢ï¼Œå…ˆä¿®**
- **P1**: å¯ç¹¼çºŒä½†æœ‰é¢¨éšª â†’ **æœ¬å°è©±å…§ä¿®æ­£**
- **P2**: ä¸å½±éŸ¿ç•¶å‰ä»»å‹™ â†’ **è¨˜éŒ„ï¼Œä¸‹æ¬¡è™•ç†**
- **P3**: éŒ¦ä¸Šæ·»èŠ± â†’ **Backlog**

### 21.4 åæ€å•é¡Œæ¸…å–® (Retrospective Questions)
åœ¨æ¯æ¬¡å°è©±çµæŸå‰ï¼Œè‡ªå•ï¼š
1.  **Why**: é€™æ¬¡ä»»å‹™ç‚ºä»€éº¼æˆåŠŸ/å¤±æ•—ï¼Ÿ
2.  **What**: å­¸åˆ°äº†ä»€éº¼æ–°æ¨¡å¼æˆ–åæ¨¡å¼ï¼Ÿ
3.  **How**: å¦‚ä½•é˜²æ­¢åŒæ¨£çš„å•é¡Œå†æ¬¡ç™¼ç”Ÿï¼Ÿ
4.  **Rule**: æ˜¯å¦éœ€è¦æ–°å¢žæˆ–ä¿®æ”¹ Protocolï¼Ÿ

### 21.5 Gap Discovery Flow (ç¼ºé™·ç™¼ç¾æµç¨‹)
ç•¶ç™¼ç¾ Playbook æœªæ¶µè“‹çš„æƒ…å¢ƒæ™‚ï¼š
1.  **è¨˜éŒ„**: åœ¨ `thought` ä¸­æ¨™è¨˜ `[PLAYBOOK_GAP]`
2.  **åˆ†é¡ž**: åˆ¤æ–· P0-P3 ç­‰ç´š
3.  **æ±ºç­–**: ä½¿ç”¨ 21.3 æ±ºç­–æ¨¹åˆ¤æ–·ç«‹å³ä¿®æ­£æˆ–å»¶å¾Œ
4.  **å ±å‘Š**: åœ¨ `notify_user` è¨Šæ¯ä¸­åŠ å…¥ `### ðŸ”´ Playbook Gap Alert` å€å¡Š
5.  **ææ¡ˆ**: å»ºè­°æ–°å¢žæˆ–ä¿®æ”¹å“ªå€‹ Protocol
6.  **è¡Œå‹•**: ä¾æ±ºç­–åŸ·è¡Œ

### 21.5 é€€å ´æ¢ä»¶ (Sunset Clause)
ç•¶ Playbook å‡ç´šè‡³ **V3.0** æˆ–ç´¯è¨ˆ 10+ æ¬¡å°è©±ç„¡æ–° Gap ç™¼ç¾æ™‚ï¼ŒLayer 2 å¯é™ç´šç‚ºã€Œé¸æ“‡æ€§åŸ·è¡Œã€ã€‚

---

## âš ï¸ é™„éŒ„ E: å¤šä»£ç†æž¶æ§‹èªªæ˜Ž (Multi-Agent Architecture Clarification)
> **æ–°å¢žæ–¼**: 2026-01-18 (V2.5)
> **ç›®çš„**: é‡æ¸… "Multi-Agent" çš„çœŸå¯¦å«ç¾©

### E.1 è¡“èªžé‡æ¸…
| è¡“èªž | å«ç¾© | å¯¦éš›èƒ½åŠ› |
| :--- | :--- | :--- |
| **Agent A/B/C** | **æ¦‚å¿µè§’è‰²** (Conceptual Roles) | åŒä¸€ Main Agent æ‰®æ¼”ä¸åŒè§’è‰² |
| **Browser Subagent** | **çœŸæ­£çš„å­ä»£ç†** | å”¯ä¸€å¯èª¿ç”¨çš„ç¨ç«‹å·¥å…· |
| **Federated Model** | **è¡Œç‚ºæ¨¡å¼** | æè¿° Agent åœ¨è¤‡é›œä»»å‹™ä¸­çš„è§’è‰²åˆ‡æ› |

### E.2 ç³»çµ±é™åˆ¶
*   âŒ ç›®å‰ç³»çµ± **ç„¡æ³•** ç”±ä½¿ç”¨è€…è‡ªå®šç¾©æ–°çš„ Agent
*   âŒ Playbook ä¸­çš„ "3 Agents" æ˜¯ **é‚è¼¯åˆ†å·¥**ï¼Œéžç‰©ç†éš”é›¢çš„é€²ç¨‹
*   âœ… å”¯ä¸€å¯èª¿ç”¨çš„ Subagent: `browser_subagent` (ç”¨æ–¼ç€è¦½å™¨è‡ªå‹•åŒ–)

### E.3 æœªä¾†å¯èƒ½æ€§
è‹¥ç³»çµ±å‡ç´šæ”¯æ´çœŸæ­£çš„å¤šä»£ç†æž¶æ§‹ï¼Œå»ºè­°ï¼š
1.  **Skill Agent**: å°ˆé–€è™•ç†ç‰¹å®š Skill (e.g., `skill_db_inspector`)
2.  **Verification Agent**: å°ˆé–€åŸ·è¡Œæ¸¬è©¦èˆ‡å¯©è¨ˆ
3.  **Research Agent**: å°ˆé–€é€²è¡Œ Web ç ”ç©¶èˆ‡æ–‡ä»¶é–±è®€

---

> *æœ¬æ–‡ä»¶ç‚º Antigravity Agentic Workflow V2.5 çš„æœ€é«˜æŒ‡å°ŽåŽŸå‰‡ã€‚*

